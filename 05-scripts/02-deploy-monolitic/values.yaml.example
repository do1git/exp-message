# ============================================================================
# Common Configuration (Reference Only)
# ============================================================================
# These values are used across multiple sections. When modifying, ensure
# consistency across all sections that reference these values.
#
# Database Configuration:
#   - name: message_db
#   - username: message_user
#   - password: message_password
#   - port: 3306
#
# Redis Configuration:
#   - password: redispassword
#   - port: 6379
# ============================================================================

# Global namespace (for Helm chart)
# namespace: default

# ============================================================================
# MySQL Configuration (for Helm chart)
# ============================================================================
mysql:
  enabled: true
  mysql:
    rootPassword: rootpassword
    database: message_db      # Common: message_db
    user: message_user        # Common: message_user
    password: message_password # Common: message_password
  persistence:
    enabled: true
    size: 10Gi

# ============================================================================
# Redis Configuration (for Helm chart)
# ============================================================================
redis:
  enabled: true
  redis:
    password: redispassword   # Common: redispassword
    port: 6379                # Common: 6379
    maxmemory: 256mb
    maxmemoryPolicy: allkeys-lru
  persistence:
    enabled: true
    size: 5Gi
  service:
    type: ClusterIP
    port: 6379

# ============================================================================
# DB Migration Configuration (for Helm chart)
# ============================================================================
batch-db-migration:
  enabled: true
  image:
    registry: "localhost:5000"
    repository: 01-db-migrations
    tag: "latest"
    pullPolicy: Always
  job:
    hookEnabled: true
    hookWeight: "-5"
    backoffLimit: 3
    activeDeadlineSeconds: 600
    ttlSecondsAfterFinished: 300
  database:
    host: ""                    # Empty to use auto-generated name: Release.Name-mysql
    port: 3306
    name: message_db
    username: message_user
    password: message_password
  flyway:
    baselineOnMigrate: true
    baselineVersion: "20260113.00"
    locations: "classpath:db/migration"

# ============================================================================
# Application Configuration (for Helm chart)
# ============================================================================
app-monolitic:
  enabled: true
  image:
    registry: "localhost:5000"  # Used by Helm chart and build scripts
    repository: 00-monolitic
    tag: "latest"
    pullPolicy: Always  # Always pull image to get latest version
  app:
    name: 00-monolitic
    port: 8080
  database:
    host: ""                    # Empty to use auto-generated name: Release.Name-mysql
    port: 3306                  # Common: 3306
    name: message_db             # Common: message_db
    username: message_user      # Common: message_user
    password: message_password  # Common: message_password
    ddlAuto: validate
  redis:
    host: ""                    # Empty to use auto-generated name: Release.Name-redis
    port: 6379                  # Common: 6379
    password: redispassword     # Common: redispassword

# ============================================================================
# Ingress Configuration (for Helm chart)
# ============================================================================
ingress:
  enabled: true
  # host: ""
