# 패치노트 - 2026-01-08

## 목표했던 내용: 실서버 인증서 교체

- OPNsense에서 인증서 만료 확인
- 만료된 인증서 업데이트

## 변경사항

### 문제 확인

- OPNsense에서 인증서 만료 상태 확인
- `System` > `Trust` > `Certificates`: 만료된 인증서만 존재
- `Services` > `Acme Client` > `Certificates`: 기존 인증서 없음
- Acme Client에서 관리되지 않아 자동 갱신 불가

### System > Trust vs Services > Acme Client

- **System > Trust**: 인증서 저장소 (보관만, 발급 기능 없음)
- **Services > Acme Client**: 인증서 자동 발급 및 갱신 (발급 후 Trust에 자동 저장)

### 해결 방안

- Acme Client에서 새로 인증서 발급하여 사용
- 자동 갱신 설정으로 향후 만료 방지

### ACME Client 인증서 발급 설정

**필수 필드:**

- **Enabled**: ✅ 체크
- **Common Name**: 도메인 입력 (예: `example.com`, 와일드카드 `*.example.com` 가능)
- **ACME Account**: 기존 계정 선택
- **Challenge Type**:
  - HTTP-01: 일반 도메인 (포트 80 접근 필요)
  - DNS-01: 와일드카드 또는 포트 80 막힌 경우 (DNS API 키 필요, AWS Route53 등)
- **Auto Renewal**: ✅ 체크
- **Renewal Interval**: 60일 (기본값)
- **Key Length**: 4096 bit (권장)

### 참고사항

- **와일드카드 인증서**: `*.example.com` 형식 가능 (DNS-01 챌린지 필수)
- **중복 사용**: 기술적으로 가능하나 권장하지 않음 (관리 복잡도, 보안 위험)
  - 와일드카드 사용 시 하나로 통일 권장

### 인증서 발급 진행

- `Services` > `Acme Client` > `Certificates`에서 새 인증서 발급 설정 입력 완료
- **Issue/Renewal date: pending** 상태 확인
  - 인증서 발급이 진행 중이거나 대기 중인 상태
  - 도메인 소유권 확인(챌린지) 진행 중일 수 있음
  - 완료되면 자동으로 Trust에 저장됨

### 다음 단계

- 인증서 발급 완료 대기 (pending → 발급 완료)
- 발급 완료 후 `System > Trust > Certificates`에서 확인
- 각 서비스에 새 인증서 적용
